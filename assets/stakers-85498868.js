(function(){"use strict";var xe=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,he=Math.ceil,J=Math.floor,V="[BigNumber Error] ",me=V+"Number primitive has more than 15 significant digits: ",ee=1e14,E=14,pe=9007199254740991,ge=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],te=1e7,C=1e9;function Ee(g){var w,x,O,p=h.prototype={constructor:h,toString:null,valueOf:null},M=new h(1),S=20,A=4,I=-7,P=21,j=-1e7,R=1e7,W=!1,$=1,q=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},X="0123456789abcdefghijklmnopqrstuvwxyz",Y=!0;function h(e,r){var n,l,i,s,c,t,o,u,f=this;if(!(f instanceof h))return new h(e,r);if(r==null){if(e&&e._isBigNumber===!0){f.s=e.s,!e.c||e.e>R?f.c=f.e=null:e.e<j?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((t=typeof e=="number")&&e*0==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,c=e;c>=10;c/=10,s++);s>R?f.c=f.e=null:(f.e=s,f.c=[e]);return}u=String(e)}else{if(!xe.test(u=String(e)))return O(f,u,t);f.s=u.charCodeAt(0)==45?(u=u.slice(1),-1):1}(s=u.indexOf("."))>-1&&(u=u.replace(".","")),(c=u.search(/e/i))>0?(s<0&&(s=c),s+=+u.slice(c+1),u=u.substring(0,c)):s<0&&(s=u.length)}else{if(B(r,2,X.length,"Base"),r==10&&Y)return f=new h(e),D(f,S+f.e+1,A);if(u=String(e),t=typeof e=="number"){if(e*0!=0)return O(f,u,t,r);if(f.s=1/e<0?(u=u.slice(1),-1):1,h.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(me+e)}else f.s=u.charCodeAt(0)===45?(u=u.slice(1),-1):1;for(n=X.slice(0,r),s=c=0,o=u.length;c<o;c++)if(n.indexOf(l=u.charAt(c))<0){if(l=="."){if(c>s){s=o;continue}}else if(!i&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){i=!0,c=-1,s=0;continue}return O(f,String(e),t,r)}t=!1,u=x(u,r,10,f.s),(s=u.indexOf("."))>-1?u=u.replace(".",""):s=u.length}for(c=0;u.charCodeAt(c)===48;c++);for(o=u.length;u.charCodeAt(--o)===48;);if(u=u.slice(c,++o)){if(o-=c,t&&h.DEBUG&&o>15&&(e>pe||e!==J(e)))throw Error(me+f.s*e);if((s=s-c-1)>R)f.c=f.e=null;else if(s<j)f.c=[f.e=0];else{if(f.e=s,f.c=[],c=(s+1)%E,s<0&&(c+=E),c<o){for(c&&f.c.push(+u.slice(0,c)),o-=E;c<o;)f.c.push(+u.slice(c,c+=E));c=E-(u=u.slice(c)).length}else c-=o;for(;c--;u+="0");f.c.push(+u)}}else f.c=[f.e=0]}h.clone=Ee,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=function(e){var r,n;if(e!=null)if(typeof e=="object"){if(e.hasOwnProperty(r="DECIMAL_PLACES")&&(n=e[r],B(n,0,C,r),S=n),e.hasOwnProperty(r="ROUNDING_MODE")&&(n=e[r],B(n,0,8,r),A=n),e.hasOwnProperty(r="EXPONENTIAL_AT")&&(n=e[r],n&&n.pop?(B(n[0],-C,0,r),B(n[1],0,C,r),I=n[0],P=n[1]):(B(n,-C,C,r),I=-(P=n<0?-n:n))),e.hasOwnProperty(r="RANGE"))if(n=e[r],n&&n.pop)B(n[0],-C,-1,r),B(n[1],1,C,r),j=n[0],R=n[1];else if(B(n,-C,C,r),n)j=-(R=n<0?-n:n);else throw Error(V+r+" cannot be zero: "+n);if(e.hasOwnProperty(r="CRYPTO"))if(n=e[r],n===!!n)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))W=n;else throw W=!n,Error(V+"crypto unavailable");else W=n;else throw Error(V+r+" not true or false: "+n);if(e.hasOwnProperty(r="MODULO_MODE")&&(n=e[r],B(n,0,9,r),$=n),e.hasOwnProperty(r="POW_PRECISION")&&(n=e[r],B(n,0,C,r),q=n),e.hasOwnProperty(r="FORMAT"))if(n=e[r],typeof n=="object")T=n;else throw Error(V+r+" not an object: "+n);if(e.hasOwnProperty(r="ALPHABET"))if(n=e[r],typeof n=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(n))Y=n.slice(0,10)=="0123456789",X=n;else throw Error(V+r+" invalid: "+n)}else throw Error(V+"Object expected: "+e);return{DECIMAL_PLACES:S,ROUNDING_MODE:A,EXPONENTIAL_AT:[I,P],RANGE:[j,R],CRYPTO:W,MODULO_MODE:$,POW_PRECISION:q,FORMAT:T,ALPHABET:X}},h.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!h.DEBUG)return!0;var r,n,l=e.c,i=e.e,s=e.s;e:if({}.toString.call(l)=="[object Array]"){if((s===1||s===-1)&&i>=-C&&i<=C&&i===J(i)){if(l[0]===0){if(i===0&&l.length===1)return!0;break e}if(r=(i+1)%E,r<1&&(r+=E),String(l[0]).length==r){for(r=0;r<l.length;r++)if(n=l[r],n<0||n>=ee||n!==J(n))break e;if(n!==0)return!0}}}else if(l===null&&i===null&&(s===null||s===1||s===-1))return!0;throw Error(V+"Invalid BigNumber: "+e)},h.maximum=h.max=function(){return fe(arguments,-1)},h.minimum=h.min=function(){return fe(arguments,1)},h.random=function(){var e=9007199254740992,r=Math.random()*e&2097151?function(){return J(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(n){var l,i,s,c,t,o=0,u=[],f=new h(M);if(n==null?n=S:B(n,0,C),c=he(n/E),W)if(crypto.getRandomValues){for(l=crypto.getRandomValues(new Uint32Array(c*=2));o<c;)t=l[o]*131072+(l[o+1]>>>11),t>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),l[o]=i[0],l[o+1]=i[1]):(u.push(t%1e14),o+=2);o=c/2}else if(crypto.randomBytes){for(l=crypto.randomBytes(c*=7);o<c;)t=(l[o]&31)*281474976710656+l[o+1]*1099511627776+l[o+2]*4294967296+l[o+3]*16777216+(l[o+4]<<16)+(l[o+5]<<8)+l[o+6],t>=9e15?crypto.randomBytes(7).copy(l,o):(u.push(t%1e14),o+=7);o=c/7}else throw W=!1,Error(V+"crypto unavailable");if(!W)for(;o<c;)t=r(),t<9e15&&(u[o++]=t%1e14);for(c=u[--o],n%=E,c&&n&&(t=ge[E-n],u[o]=J(c/t)*t);u[o]===0;u.pop(),o--);if(o<0)u=[s=0];else{for(s=-1;u[0]===0;u.splice(0,1),s-=E);for(o=1,t=u[0];t>=10;t/=10,o++);o<E&&(s-=E-o)}return f.e=s,f.c=u,f}}(),h.sum=function(){for(var e=1,r=arguments,n=new h(r[0]);e<r.length;)n=n.plus(r[e++]);return n},x=function(){var e="0123456789";function r(n,l,i,s){for(var c,t=[0],o,u=0,f=n.length;u<f;){for(o=t.length;o--;t[o]*=l);for(t[0]+=s.indexOf(n.charAt(u++)),c=0;c<t.length;c++)t[c]>i-1&&(t[c+1]==null&&(t[c+1]=0),t[c+1]+=t[c]/i|0,t[c]%=i)}return t.reverse()}return function(n,l,i,s,c){var t,o,u,f,a,d,m,v,y=n.indexOf("."),L=S,N=A;for(y>=0&&(f=q,q=0,n=n.replace(".",""),v=new h(l),d=v.pow(n.length-y),q=f,v.c=r(ne(K(d.c),d.e,"0"),10,i,e),v.e=v.c.length),m=r(n,l,i,c?(t=X,e):(t=e,X)),u=f=m.length;m[--f]==0;m.pop());if(!m[0])return t.charAt(0);if(y<0?--u:(d.c=m,d.e=u,d.s=s,d=w(d,v,L,N,i),m=d.c,a=d.r,u=d.e),o=u+L+1,y=m[o],f=i/2,a=a||o<0||m[o+1]!=null,a=N<4?(y!=null||a)&&(N==0||N==(d.s<0?3:2)):y>f||y==f&&(N==4||a||N==6&&m[o-1]&1||N==(d.s<0?8:7)),o<1||!m[0])n=a?ne(t.charAt(1),-L,t.charAt(0)):t.charAt(0);else{if(m.length=o,a)for(--i;++m[--o]>i;)m[o]=0,o||(++u,m=[1].concat(m));for(f=m.length;!m[--f];);for(y=0,n="";y<=f;n+=t.charAt(m[y++]));n=ne(n,u,t.charAt(0))}return n}}(),w=function(){function e(l,i,s){var c,t,o,u,f=0,a=l.length,d=i%te,m=i/te|0;for(l=l.slice();a--;)o=l[a]%te,u=l[a]/te|0,c=m*o+u*d,t=d*o+c%te*te+f,f=(t/s|0)+(c/te|0)+m*u,l[a]=t%s;return f&&(l=[f].concat(l)),l}function r(l,i,s,c){var t,o;if(s!=c)o=s>c?1:-1;else for(t=o=0;t<s;t++)if(l[t]!=i[t]){o=l[t]>i[t]?1:-1;break}return o}function n(l,i,s,c){for(var t=0;s--;)l[s]-=t,t=l[s]<i[s]?1:0,l[s]=t*c+l[s]-i[s];for(;!l[0]&&l.length>1;l.splice(0,1));}return function(l,i,s,c,t){var o,u,f,a,d,m,v,y,L,N,_,F,ae,we,de,re,le,b=l.s==i.s?1:-1,z=l.c,k=i.c;if(!z||!z[0]||!k||!k[0])return new h(!l.s||!i.s||(z?k&&z[0]==k[0]:!k)?NaN:z&&z[0]==0||!k?b*0:b/0);for(y=new h(b),L=y.c=[],u=l.e-i.e,b=s+u+1,t||(t=ee,u=Q(l.e/E)-Q(i.e/E),b=b/E|0),f=0;k[f]==(z[f]||0);f++);if(k[f]>(z[f]||0)&&u--,b<0)L.push(1),a=!0;else{for(we=z.length,re=k.length,f=0,b+=2,d=J(t/(k[0]+1)),d>1&&(k=e(k,d,t),z=e(z,d,t),re=k.length,we=z.length),ae=re,N=z.slice(0,re),_=N.length;_<re;N[_++]=0);le=k.slice(),le=[0].concat(le),de=k[0],k[1]>=t/2&&de++;do{if(d=0,o=r(k,N,re,_),o<0){if(F=N[0],re!=_&&(F=F*t+(N[1]||0)),d=J(F/de),d>1)for(d>=t&&(d=t-1),m=e(k,d,t),v=m.length,_=N.length;r(m,N,v,_)==1;)d--,n(m,re<v?le:k,v,t),v=m.length,o=1;else d==0&&(o=d=1),m=k.slice(),v=m.length;if(v<_&&(m=[0].concat(m)),n(N,m,_,t),_=N.length,o==-1)for(;r(k,N,re,_)<1;)d++,n(N,re<_?le:k,_,t),_=N.length}else o===0&&(d++,N=[0]);L[f++]=d,N[0]?N[_++]=z[ae]||0:(N=[z[ae]],_=1)}while((ae++<we||N[0]!=null)&&b--);a=N[0]!=null,L[0]||L.splice(0,1)}if(t==ee){for(f=1,b=L[0];b>=10;b/=10,f++);D(y,s+(y.e=f+u*E-1)+1,c,a)}else y.e=u,y.r=+a;return y}}();function se(e,r,n,l){var i,s,c,t,o;if(n==null?n=A:B(n,0,8),!e.c)return e.toString();if(i=e.c[0],c=e.e,r==null)o=K(e.c),o=l==1||l==2&&(c<=I||c>=P)?ce(o,c):ne(o,c,"0");else if(e=D(new h(e),r,n),s=e.e,o=K(e.c),t=o.length,l==1||l==2&&(r<=s||s<=I)){for(;t<r;o+="0",t++);o=ce(o,s)}else if(r-=c,o=ne(o,s,"0"),s+1>t){if(--r>0)for(o+=".";r--;o+="0");}else if(r+=s-t,r>0)for(s+1==t&&(o+=".");r--;o+="0");return e.s<0&&i?"-"+o:o}function fe(e,r){for(var n,l,i=1,s=new h(e[0]);i<e.length;i++)l=new h(e[i]),(!l.s||(n=ie(s,l))===r||n===0&&s.s===r)&&(s=l);return s}function Z(e,r,n){for(var l=1,i=r.length;!r[--i];r.pop());for(i=r[0];i>=10;i/=10,l++);return(n=l+n*E-1)>R?e.c=e.e=null:n<j?e.c=[e.e=0]:(e.e=n,e.c=r),e}O=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,n=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,c,t,o){var u,f=t?c:c.replace(i,"");if(l.test(f))s.s=isNaN(f)?null:f<0?-1:1;else{if(!t&&(f=f.replace(e,function(a,d,m){return u=(m=m.toLowerCase())=="x"?16:m=="b"?2:8,!o||o==u?d:a}),o&&(u=o,f=f.replace(r,"$1").replace(n,"0.$1")),c!=f))return new h(f,u);if(h.DEBUG)throw Error(V+"Not a"+(o?" base "+o:"")+" number: "+c);s.s=null}s.c=s.e=null}}();function D(e,r,n,l){var i,s,c,t,o,u,f,a=e.c,d=ge;if(a){e:{for(i=1,t=a[0];t>=10;t/=10,i++);if(s=r-i,s<0)s+=E,c=r,o=a[u=0],f=J(o/d[i-c-1]%10);else if(u=he((s+1)/E),u>=a.length)if(l){for(;a.length<=u;a.push(0));o=f=0,i=1,s%=E,c=s-E+1}else break e;else{for(o=t=a[u],i=1;t>=10;t/=10,i++);s%=E,c=s-E+i,f=c<0?0:J(o/d[i-c-1]%10)}if(l=l||r<0||a[u+1]!=null||(c<0?o:o%d[i-c-1]),l=n<4?(f||l)&&(n==0||n==(e.s<0?3:2)):f>5||f==5&&(n==4||l||n==6&&(s>0?c>0?o/d[i-c]:0:a[u-1])%10&1||n==(e.s<0?8:7)),r<1||!a[0])return a.length=0,l?(r-=e.e+1,a[0]=d[(E-r%E)%E],e.e=-r||0):a[0]=e.e=0,e;if(s==0?(a.length=u,t=1,u--):(a.length=u+1,t=d[E-s],a[u]=c>0?J(o/d[i-c]%d[c])*t:0),l)for(;;)if(u==0){for(s=1,c=a[0];c>=10;c/=10,s++);for(c=a[0]+=t,t=1;c>=10;c/=10,t++);s!=t&&(e.e++,a[0]==ee&&(a[0]=1));break}else{if(a[u]+=t,a[u]!=ee)break;a[u--]=0,t=1}for(s=a.length;a[--s]===0;a.pop());}e.e>R?e.c=e.e=null:e.e<j&&(e.c=[e.e=0])}return e}function G(e){var r,n=e.e;return n===null?e.toString():(r=K(e.c),r=n<=I||n>=P?ce(r,n):ne(r,n,"0"),e.s<0?"-"+r:r)}return p.absoluteValue=p.abs=function(){var e=new h(this);return e.s<0&&(e.s=1),e},p.comparedTo=function(e,r){return ie(this,new h(e,r))},p.decimalPlaces=p.dp=function(e,r){var n,l,i,s=this;if(e!=null)return B(e,0,C),r==null?r=A:B(r,0,8),D(new h(s),e+s.e+1,r);if(!(n=s.c))return null;if(l=((i=n.length-1)-Q(this.e/E))*E,i=n[i])for(;i%10==0;i/=10,l--);return l<0&&(l=0),l},p.dividedBy=p.div=function(e,r){return w(this,new h(e,r),S,A)},p.dividedToIntegerBy=p.idiv=function(e,r){return w(this,new h(e,r),0,1)},p.exponentiatedBy=p.pow=function(e,r){var n,l,i,s,c,t,o,u,f,a=this;if(e=new h(e),e.c&&!e.isInteger())throw Error(V+"Exponent not an integer: "+G(e));if(r!=null&&(r=new h(r)),t=e.e>14,!a.c||!a.c[0]||a.c[0]==1&&!a.e&&a.c.length==1||!e.c||!e.c[0])return f=new h(Math.pow(+G(a),t?e.s*(2-ue(e)):+G(e))),r?f.mod(r):f;if(o=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new h(NaN);l=!o&&a.isInteger()&&r.isInteger(),l&&(a=a.mod(r))}else{if(e.e>9&&(a.e>0||a.e<-1||(a.e==0?a.c[0]>1||t&&a.c[1]>=24e7:a.c[0]<8e13||t&&a.c[0]<=9999975e7)))return s=a.s<0&&ue(e)?-0:0,a.e>-1&&(s=1/s),new h(o?1/s:s);q&&(s=he(q/E+2))}for(t?(n=new h(.5),o&&(e.s=1),u=ue(e)):(i=Math.abs(+G(e)),u=i%2),f=new h(M);;){if(u){if(f=f.times(a),!f.c)break;s?f.c.length>s&&(f.c.length=s):l&&(f=f.mod(r))}if(i){if(i=J(i/2),i===0)break;u=i%2}else if(e=e.times(n),D(e,e.e+1,1),e.e>14)u=ue(e);else{if(i=+G(e),i===0)break;u=i%2}a=a.times(a),s?a.c&&a.c.length>s&&(a.c.length=s):l&&(a=a.mod(r))}return l?f:(o&&(f=M.div(f)),r?f.mod(r):s?D(f,q,A,c):f)},p.integerValue=function(e){var r=new h(this);return e==null?e=A:B(e,0,8),D(r,r.e+1,e)},p.isEqualTo=p.eq=function(e,r){return ie(this,new h(e,r))===0},p.isFinite=function(){return!!this.c},p.isGreaterThan=p.gt=function(e,r){return ie(this,new h(e,r))>0},p.isGreaterThanOrEqualTo=p.gte=function(e,r){return(r=ie(this,new h(e,r)))===1||r===0},p.isInteger=function(){return!!this.c&&Q(this.e/E)>this.c.length-2},p.isLessThan=p.lt=function(e,r){return ie(this,new h(e,r))<0},p.isLessThanOrEqualTo=p.lte=function(e,r){return(r=ie(this,new h(e,r)))===-1||r===0},p.isNaN=function(){return!this.s},p.isNegative=function(){return this.s<0},p.isPositive=function(){return this.s>0},p.isZero=function(){return!!this.c&&this.c[0]==0},p.minus=function(e,r){var n,l,i,s,c=this,t=c.s;if(e=new h(e,r),r=e.s,!t||!r)return new h(NaN);if(t!=r)return e.s=-r,c.plus(e);var o=c.e/E,u=e.e/E,f=c.c,a=e.c;if(!o||!u){if(!f||!a)return f?(e.s=-r,e):new h(a?c:NaN);if(!f[0]||!a[0])return a[0]?(e.s=-r,e):new h(f[0]?c:A==3?-0:0)}if(o=Q(o),u=Q(u),f=f.slice(),t=o-u){for((s=t<0)?(t=-t,i=f):(u=o,i=a),i.reverse(),r=t;r--;i.push(0));i.reverse()}else for(l=(s=(t=f.length)<(r=a.length))?t:r,t=r=0;r<l;r++)if(f[r]!=a[r]){s=f[r]<a[r];break}if(s&&(i=f,f=a,a=i,e.s=-e.s),r=(l=a.length)-(n=f.length),r>0)for(;r--;f[n++]=0);for(r=ee-1;l>t;){if(f[--l]<a[l]){for(n=l;n&&!f[--n];f[n]=r);--f[n],f[l]+=ee}f[l]-=a[l]}for(;f[0]==0;f.splice(0,1),--u);return f[0]?Z(e,f,u):(e.s=A==3?-1:1,e.c=[e.e=0],e)},p.modulo=p.mod=function(e,r){var n,l,i=this;return e=new h(e,r),!i.c||!e.s||e.c&&!e.c[0]?new h(NaN):!e.c||i.c&&!i.c[0]?new h(i):($==9?(l=e.s,e.s=1,n=w(i,e,0,3),e.s=l,n.s*=l):n=w(i,e,0,$),e=i.minus(n.times(e)),!e.c[0]&&$==1&&(e.s=i.s),e)},p.multipliedBy=p.times=function(e,r){var n,l,i,s,c,t,o,u,f,a,d,m,v,y,L,N=this,_=N.c,F=(e=new h(e,r)).c;if(!_||!F||!_[0]||!F[0])return!N.s||!e.s||_&&!_[0]&&!F||F&&!F[0]&&!_?e.c=e.e=e.s=null:(e.s*=N.s,!_||!F?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(l=Q(N.e/E)+Q(e.e/E),e.s*=N.s,o=_.length,a=F.length,o<a&&(v=_,_=F,F=v,i=o,o=a,a=i),i=o+a,v=[];i--;v.push(0));for(y=ee,L=te,i=a;--i>=0;){for(n=0,d=F[i]%L,m=F[i]/L|0,c=o,s=i+c;s>i;)u=_[--c]%L,f=_[c]/L|0,t=m*u+f*d,u=d*u+t%L*L+v[s]+n,n=(u/y|0)+(t/L|0)+m*f,v[s--]=u%y;v[s]=n}return n?++l:v.splice(0,1),Z(e,v,l)},p.negated=function(){var e=new h(this);return e.s=-e.s||null,e},p.plus=function(e,r){var n,l=this,i=l.s;if(e=new h(e,r),r=e.s,!i||!r)return new h(NaN);if(i!=r)return e.s=-r,l.minus(e);var s=l.e/E,c=e.e/E,t=l.c,o=e.c;if(!s||!c){if(!t||!o)return new h(i/0);if(!t[0]||!o[0])return o[0]?e:new h(t[0]?l:i*0)}if(s=Q(s),c=Q(c),t=t.slice(),i=s-c){for(i>0?(c=s,n=o):(i=-i,n=t),n.reverse();i--;n.push(0));n.reverse()}for(i=t.length,r=o.length,i-r<0&&(n=o,o=t,t=n,r=i),i=0;r;)i=(t[--r]=t[r]+o[r]+i)/ee|0,t[r]=ee===t[r]?0:t[r]%ee;return i&&(t=[i].concat(t),++c),Z(e,t,c)},p.precision=p.sd=function(e,r){var n,l,i,s=this;if(e!=null&&e!==!!e)return B(e,1,C),r==null?r=A:B(r,0,8),D(new h(s),e,r);if(!(n=s.c))return null;if(i=n.length-1,l=i*E+1,i=n[i]){for(;i%10==0;i/=10,l--);for(i=n[0];i>=10;i/=10,l++);}return e&&s.e+1>l&&(l=s.e+1),l},p.shiftedBy=function(e){return B(e,-pe,pe),this.times("1e"+e)},p.squareRoot=p.sqrt=function(){var e,r,n,l,i,s=this,c=s.c,t=s.s,o=s.e,u=S+4,f=new h("0.5");if(t!==1||!c||!c[0])return new h(!t||t<0&&(!c||c[0])?NaN:c?s:1/0);if(t=Math.sqrt(+G(s)),t==0||t==1/0?(r=K(c),(r.length+o)%2==0&&(r+="0"),t=Math.sqrt(+r),o=Q((o+1)/2)-(o<0||o%2),t==1/0?r="5e"+o:(r=t.toExponential(),r=r.slice(0,r.indexOf("e")+1)+o),n=new h(r)):n=new h(t+""),n.c[0]){for(o=n.e,t=o+u,t<3&&(t=0);;)if(i=n,n=f.times(i.plus(w(s,i,u,1))),K(i.c).slice(0,t)===(r=K(n.c)).slice(0,t))if(n.e<o&&--t,r=r.slice(t-3,t+1),r=="9999"||!l&&r=="4999"){if(!l&&(D(i,i.e+S+2,0),i.times(i).eq(s))){n=i;break}u+=4,t+=4,l=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(D(n,n.e+S+2,1),e=!n.times(n).eq(s));break}}return D(n,n.e+S+1,A,e)},p.toExponential=function(e,r){return e!=null&&(B(e,0,C),e++),se(this,e,r,1)},p.toFixed=function(e,r){return e!=null&&(B(e,0,C),e=e+this.e+1),se(this,e,r)},p.toFormat=function(e,r,n){var l,i=this;if(n==null)e!=null&&r&&typeof r=="object"?(n=r,r=null):e&&typeof e=="object"?(n=e,e=r=null):n=T;else if(typeof n!="object")throw Error(V+"Argument not an object: "+n);if(l=i.toFixed(e,r),i.c){var s,c=l.split("."),t=+n.groupSize,o=+n.secondaryGroupSize,u=n.groupSeparator||"",f=c[0],a=c[1],d=i.s<0,m=d?f.slice(1):f,v=m.length;if(o&&(s=t,t=o,o=s,v-=s),t>0&&v>0){for(s=v%t||t,f=m.substr(0,s);s<v;s+=t)f+=u+m.substr(s,t);o>0&&(f+=u+m.slice(s)),d&&(f="-"+f)}l=a?f+(n.decimalSeparator||"")+((o=+n.fractionGroupSize)?a.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):a):f}return(n.prefix||"")+l+(n.suffix||"")},p.toFraction=function(e){var r,n,l,i,s,c,t,o,u,f,a,d,m=this,v=m.c;if(e!=null&&(t=new h(e),!t.isInteger()&&(t.c||t.s!==1)||t.lt(M)))throw Error(V+"Argument "+(t.isInteger()?"out of range: ":"not an integer: ")+G(t));if(!v)return new h(m);for(r=new h(M),u=n=new h(M),l=o=new h(M),d=K(v),s=r.e=d.length-m.e-1,r.c[0]=ge[(c=s%E)<0?E+c:c],e=!e||t.comparedTo(r)>0?s>0?r:u:t,c=R,R=1/0,t=new h(d),o.c[0]=0;f=w(t,r,0,1),i=n.plus(f.times(l)),i.comparedTo(e)!=1;)n=l,l=i,u=o.plus(f.times(i=u)),o=i,r=t.minus(f.times(i=r)),t=i;return i=w(e.minus(n),l,0,1),o=o.plus(i.times(u)),n=n.plus(i.times(l)),o.s=u.s=m.s,s=s*2,a=w(u,l,s,A).minus(m).abs().comparedTo(w(o,n,s,A).minus(m).abs())<1?[u,l]:[o,n],R=c,a},p.toNumber=function(){return+G(this)},p.toPrecision=function(e,r){return e!=null&&B(e,1,C),se(this,e,r,2)},p.toString=function(e){var r,n=this,l=n.s,i=n.e;return i===null?l?(r="Infinity",l<0&&(r="-"+r)):r="NaN":(e==null?r=i<=I||i>=P?ce(K(n.c),i):ne(K(n.c),i,"0"):e===10&&Y?(n=D(new h(n),S+i+1,A),r=ne(K(n.c),n.e,"0")):(B(e,2,X.length,"Base"),r=x(ne(K(n.c),i,"0"),10,e,l,!0)),l<0&&n.c[0]&&(r="-"+r)),r},p.valueOf=p.toJSON=function(){return G(this)},p._isBigNumber=!0,p[Symbol.toStringTag]="BigNumber",p[Symbol.for("nodejs.util.inspect.custom")]=p.valueOf,g!=null&&h.set(g),h}function Q(g){var w=g|0;return g>0||g===w?w:w-1}function K(g){for(var w,x,O=1,p=g.length,M=g[0]+"";O<p;){for(w=g[O++]+"",x=E-w.length;x--;w="0"+w);M+=w}for(p=M.length;M.charCodeAt(--p)===48;);return M.slice(0,p+1||1)}function ie(g,w){var x,O,p=g.c,M=w.c,S=g.s,A=w.s,I=g.e,P=w.e;if(!S||!A)return null;if(x=p&&!p[0],O=M&&!M[0],x||O)return x?O?0:-A:S;if(S!=A)return S;if(x=S<0,O=I==P,!p||!M)return O?0:!p^x?1:-1;if(!O)return I>P^x?1:-1;for(A=(I=p.length)<(P=M.length)?I:P,S=0;S<A;S++)if(p[S]!=M[S])return p[S]>M[S]^x?1:-1;return I==P?0:I>P^x?1:-1}function B(g,w,x,O){if(g<w||g>x||g!==J(g))throw Error(V+(O||"Argument")+(typeof g=="number"?g<w||g>x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(g))}function ue(g){var w=g.c.length-1;return Q(g.e/E)==w&&g.c[w]%2!=0}function ce(g,w){return(g.length>1?g.charAt(0)+"."+g.slice(1):g)+(w<0?"e":"e+")+w}function ne(g,w,x){var O,p;if(w<0){for(p=x+".";++w;p+=x);g=p+g}else if(O=g.length,++w>O){for(p=x,w-=O;--w;p+=x);g+=p}else w<O&&(g=g.slice(0,w)+"."+g.slice(w));return g}var H=Ee();typeof SuppressedError=="function"&&SuppressedError;/* @license Copyright 2023 @paritytech/polkadot-cloud authors & contributors
SPDX-License-Identifier: GPL-3.0-only */var Oe;(function(g){g.GIBBERISH="Input is not correct. Use numbers, floats or expression (e.g. 1k, 1.3m)",g.ZERO="You cannot send 0 funds",g.SUCCESS="",g.SYMBOL_ERROR="Provided symbol is not correct",g.GENERAL_ERROR="Check your input. Something went wrong"})(Oe||(Oe={}));var Ne=function(g,w){return new H(g.dividedBy(new H(10).exponentiatedBy(w)).toFixed(w))},oe=function(g){return g.replace(/,/g,"")},U=function(g){return new H(10).pow(new H(g))},ve=[{value:U(24),symbol:"y",isMil:!0},{value:U(21),symbol:"z",isMil:!0},{value:U(18),symbol:"a",isMil:!0},{value:U(15),symbol:"f",isMil:!0},{value:U(12),symbol:"p",isMil:!0},{value:U(9),symbol:"n",isMil:!0},{value:U(6),symbol:"μ",isMil:!0},{value:U(3),symbol:"m",isMil:!0},{value:new H(1),symbol:""},{value:U(3),symbol:"k"},{value:U(6),symbol:"M"},{value:U(9),symbol:"G"},{value:U(12),symbol:"T"},{value:U(15),symbol:"P"},{value:U(18),symbol:"E"},{value:U(21),symbol:"Y"},{value:U(24),symbol:"Z"}];ve.map(function(g){return g.symbol}).join(", ").replace(", ,",","),self.addEventListener("message",g=>{const{data:w}=g,{task:x}=w;let O={};switch(x){case"processExposures":O=Se(w);break;case"processEraForExposure":O=Ae(w);break}postMessage({task:x,...O})});const Ae=g=>{const{era:w,maxExposurePageSize:x,exposures:O,exitOnExposed:p,task:M,networkName:S,who:A}=g;let I=!1;const P={};return O.every(({keys:j,val:R})=>{const W=j[1],$=(R==null?void 0:R.others)??[],q=(R==null?void 0:R.own)||0,T=(R==null?void 0:R.total)||0,X=W===A;if(X){const h=new H(q).isZero()?"0":new H(q).dividedBy(T).toString();if(P[W]={staked:q,total:T,share:h,isValidator:X,exposedPage:1},I=!0,p)return!1}const Y=$.find(h=>h.who===A);if(Y){const h=$.findIndex(Z=>Z.who===A),se=Math.floor(h/Number(x)),fe=new H(Y.value).isZero()||T===0?"0":new H(Y.value).dividedBy(T).toString();if(P[W]={staked:Y.value,total:T,share:fe,isValidator:X,exposedPage:se},I=!0,p)return!1}return!0}),{networkName:S,era:w,exposed:I,exposedValidators:Object.keys(P).length?P:null,task:M,who:A}},Se=g=>{const{task:w,networkName:x,era:O,units:p,exposures:M,activeAccount:S,maxExposurePageSize:A}=g,I=[];let P=0;const j=[],R=[];return M.forEach(({keys:W,val:$})=>{var X;P++;const q=W[1];let T=($==null?void 0:$.others.map(Y=>({...Y,value:oe(Y.value)})))??[];if(T.length){T=T.sort((Z,D)=>{const G=new H(oe(D.value)).minus(oe(Z.value));return G.isZero()?0:G.isLessThan(0)?-1:1});const Y=Math.min(A-1,T.length),h=T.length>0?Ne(new H(((X=T[Y])==null?void 0:X.value)||0),p).toString():"0",se=T.length>A;I.push({address:q,lowestReward:h,oversubscribed:se,others:T,own:oe($.own),total:oe($.total)});for(const Z of T){const D=new H(oe(Z.value)),G=R.findIndex(({who:e})=>e===Z.who);G===-1?R.push({who:Z.who,value:D.toString()}):R[G].value=new H(R[G].value).plus(D).toString()}const fe=T.find(({who:Z})=>Z===S);fe!==void 0&&j.push({address:q,value:Ne(new H(oe(fe.value)),p).toString()})}}),{networkName:x,era:O,stakers:I,totalActiveNominators:R.length,activeAccountOwnStake:j,activeValidators:P,task:w,who:S}}})();
