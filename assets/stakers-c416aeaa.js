(function(){"use strict";var me=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ae=Math.ceil,W=Math.floor,H="[BigNumber Error] ",de=H+"Number primitive has more than 15 significant digits: ",Q=1e14,N=14,he=9007199254740991,pe=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ne=1e7,L=1e9;function Ee(d){var g,x,m,p=h.prototype={constructor:h,toString:null,valueOf:null},k=new h(1),v=20,S=4,R=-7,C=21,P=-1e7,M=1e7,j=!1,V=1,y=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz",X=!0;function h(e,r){var n,l,i,o,c,t,s,u,f=this;if(!(f instanceof h))return new h(e,r);if(r==null){if(e&&e._isBigNumber===!0){f.s=e.s,!e.c||e.e>M?f.c=f.e=null:e.e<P?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((t=typeof e=="number")&&e*0==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,c=e;c>=10;c/=10,o++);o>M?f.c=f.e=null:(f.e=o,f.c=[e]);return}u=String(e)}else{if(!me.test(u=String(e)))return m(f,u,t);f.s=u.charCodeAt(0)==45?(u=u.slice(1),-1):1}(o=u.indexOf("."))>-1&&(u=u.replace(".","")),(c=u.search(/e/i))>0?(o<0&&(o=c),o+=+u.slice(c+1),u=u.substring(0,c)):o<0&&(o=u.length)}else{if(B(r,2,$.length,"Base"),r==10&&X)return f=new h(e),F(f,v+f.e+1,S);if(u=String(e),t=typeof e=="number"){if(e*0!=0)return m(f,u,t,r);if(f.s=1/e<0?(u=u.slice(1),-1):1,h.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(de+e)}else f.s=u.charCodeAt(0)===45?(u=u.slice(1),-1):1;for(n=$.slice(0,r),o=c=0,s=u.length;c<s;c++)if(n.indexOf(l=u.charAt(c))<0){if(l=="."){if(c>o){o=s;continue}}else if(!i&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){i=!0,c=-1,o=0;continue}return m(f,String(e),t,r)}t=!1,u=x(u,r,10,f.s),(o=u.indexOf("."))>-1?u=u.replace(".",""):o=u.length}for(c=0;u.charCodeAt(c)===48;c++);for(s=u.length;u.charCodeAt(--s)===48;);if(u=u.slice(c,++s)){if(s-=c,t&&h.DEBUG&&s>15&&(e>he||e!==W(e)))throw Error(de+f.s*e);if((o=o-c-1)>M)f.c=f.e=null;else if(o<P)f.c=[f.e=0];else{if(f.e=o,f.c=[],c=(o+1)%N,o<0&&(c+=N),c<s){for(c&&f.c.push(+u.slice(0,c)),s-=N;c<s;)f.c.push(+u.slice(c,c+=N));c=N-(u=u.slice(c)).length}else c-=s;for(;c--;u+="0");f.c.push(+u)}}else f.c=[f.e=0]}h.clone=Ee,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=function(e){var r,n;if(e!=null)if(typeof e=="object"){if(e.hasOwnProperty(r="DECIMAL_PLACES")&&(n=e[r],B(n,0,L,r),v=n),e.hasOwnProperty(r="ROUNDING_MODE")&&(n=e[r],B(n,0,8,r),S=n),e.hasOwnProperty(r="EXPONENTIAL_AT")&&(n=e[r],n&&n.pop?(B(n[0],-L,0,r),B(n[1],0,L,r),R=n[0],C=n[1]):(B(n,-L,L,r),R=-(C=n<0?-n:n))),e.hasOwnProperty(r="RANGE"))if(n=e[r],n&&n.pop)B(n[0],-L,-1,r),B(n[1],1,L,r),P=n[0],M=n[1];else if(B(n,-L,L,r),n)P=-(M=n<0?-n:n);else throw Error(H+r+" cannot be zero: "+n);if(e.hasOwnProperty(r="CRYPTO"))if(n=e[r],n===!!n)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))j=n;else throw j=!n,Error(H+"crypto unavailable");else j=n;else throw Error(H+r+" not true or false: "+n);if(e.hasOwnProperty(r="MODULO_MODE")&&(n=e[r],B(n,0,9,r),V=n),e.hasOwnProperty(r="POW_PRECISION")&&(n=e[r],B(n,0,L,r),y=n),e.hasOwnProperty(r="FORMAT"))if(n=e[r],typeof n=="object")U=n;else throw Error(H+r+" not an object: "+n);if(e.hasOwnProperty(r="ALPHABET"))if(n=e[r],typeof n=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(n))X=n.slice(0,10)=="0123456789",$=n;else throw Error(H+r+" invalid: "+n)}else throw Error(H+"Object expected: "+e);return{DECIMAL_PLACES:v,ROUNDING_MODE:S,EXPONENTIAL_AT:[R,C],RANGE:[P,M],CRYPTO:j,MODULO_MODE:V,POW_PRECISION:y,FORMAT:U,ALPHABET:$}},h.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!h.DEBUG)return!0;var r,n,l=e.c,i=e.e,o=e.s;e:if({}.toString.call(l)=="[object Array]"){if((o===1||o===-1)&&i>=-L&&i<=L&&i===W(i)){if(l[0]===0){if(i===0&&l.length===1)return!0;break e}if(r=(i+1)%N,r<1&&(r+=N),String(l[0]).length==r){for(r=0;r<l.length;r++)if(n=l[r],n<0||n>=Q||n!==W(n))break e;if(n!==0)return!0}}}else if(l===null&&i===null&&(o===null||o===1||o===-1))return!0;throw Error(H+"Invalid BigNumber: "+e)},h.maximum=h.max=function(){return oe(arguments,-1)},h.minimum=h.min=function(){return oe(arguments,1)},h.random=function(){var e=9007199254740992,r=Math.random()*e&2097151?function(){return W(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(n){var l,i,o,c,t,s=0,u=[],f=new h(k);if(n==null?n=v:B(n,0,L),c=ae(n/N),j)if(crypto.getRandomValues){for(l=crypto.getRandomValues(new Uint32Array(c*=2));s<c;)t=l[s]*131072+(l[s+1]>>>11),t>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),l[s]=i[0],l[s+1]=i[1]):(u.push(t%1e14),s+=2);s=c/2}else if(crypto.randomBytes){for(l=crypto.randomBytes(c*=7);s<c;)t=(l[s]&31)*281474976710656+l[s+1]*1099511627776+l[s+2]*4294967296+l[s+3]*16777216+(l[s+4]<<16)+(l[s+5]<<8)+l[s+6],t>=9e15?crypto.randomBytes(7).copy(l,s):(u.push(t%1e14),s+=7);s=c/7}else throw j=!1,Error(H+"crypto unavailable");if(!j)for(;s<c;)t=r(),t<9e15&&(u[s++]=t%1e14);for(c=u[--s],n%=N,c&&n&&(t=pe[N-n],u[s]=W(c/t)*t);u[s]===0;u.pop(),s--);if(s<0)u=[o=0];else{for(o=-1;u[0]===0;u.splice(0,1),o-=N);for(s=1,t=u[0];t>=10;t/=10,s++);s<N&&(o-=N-s)}return f.e=o,f.c=u,f}}(),h.sum=function(){for(var e=1,r=arguments,n=new h(r[0]);e<r.length;)n=n.plus(r[e++]);return n},x=function(){var e="0123456789";function r(n,l,i,o){for(var c,t=[0],s,u=0,f=n.length;u<f;){for(s=t.length;s--;t[s]*=l);for(t[0]+=o.indexOf(n.charAt(u++)),c=0;c<t.length;c++)t[c]>i-1&&(t[c+1]==null&&(t[c+1]=0),t[c+1]+=t[c]/i|0,t[c]%=i)}return t.reverse()}return function(n,l,i,o,c){var t,s,u,f,a,w,E,A,I=n.indexOf("."),D=v,O=S;for(I>=0&&(f=y,y=0,n=n.replace(".",""),A=new h(l),w=A.pow(n.length-I),y=f,A.c=r(re(Y(w.c),w.e,"0"),10,i,e),A.e=A.c.length),E=r(n,l,i,c?(t=$,e):(t=e,$)),u=f=E.length;E[--f]==0;E.pop());if(!E[0])return t.charAt(0);if(I<0?--u:(w.c=E,w.e=u,w.s=o,w=g(w,A,D,O,i),E=w.c,a=w.r,u=w.e),s=u+D+1,I=E[s],f=i/2,a=a||s<0||E[s+1]!=null,a=O<4?(I!=null||a)&&(O==0||O==(w.s<0?3:2)):I>f||I==f&&(O==4||a||O==6&&E[s-1]&1||O==(w.s<0?8:7)),s<1||!E[0])n=a?re(t.charAt(1),-D,t.charAt(0)):t.charAt(0);else{if(E.length=s,a)for(--i;++E[--s]>i;)E[s]=0,s||(++u,E=[1].concat(E));for(f=E.length;!E[--f];);for(I=0,n="";I<=f;n+=t.charAt(E[I++]));n=re(n,u,t.charAt(0))}return n}}(),g=function(){function e(l,i,o){var c,t,s,u,f=0,a=l.length,w=i%ne,E=i/ne|0;for(l=l.slice();a--;)s=l[a]%ne,u=l[a]/ne|0,c=E*s+u*w,t=w*s+c%ne*ne+f,f=(t/o|0)+(c/ne|0)+E*u,l[a]=t%o;return f&&(l=[f].concat(l)),l}function r(l,i,o,c){var t,s;if(o!=c)s=o>c?1:-1;else for(t=s=0;t<o;t++)if(l[t]!=i[t]){s=l[t]>i[t]?1:-1;break}return s}function n(l,i,o,c){for(var t=0;o--;)l[o]-=t,t=l[o]<i[o]?1:0,l[o]=t*c+l[o]-i[o];for(;!l[0]&&l.length>1;l.splice(0,1));}return function(l,i,o,c,t){var s,u,f,a,w,E,A,I,D,O,_,q,ce,ge,we,ee,fe,J=l.s==i.s?1:-1,z=l.c,T=i.c;if(!z||!z[0]||!T||!T[0])return new h(!l.s||!i.s||(z?T&&z[0]==T[0]:!T)?NaN:z&&z[0]==0||!T?J*0:J/0);for(I=new h(J),D=I.c=[],u=l.e-i.e,J=o+u+1,t||(t=Q,u=Z(l.e/N)-Z(i.e/N),J=J/N|0),f=0;T[f]==(z[f]||0);f++);if(T[f]>(z[f]||0)&&u--,J<0)D.push(1),a=!0;else{for(ge=z.length,ee=T.length,f=0,J+=2,w=W(t/(T[0]+1)),w>1&&(T=e(T,w,t),z=e(z,w,t),ee=T.length,ge=z.length),ce=ee,O=z.slice(0,ee),_=O.length;_<ee;O[_++]=0);fe=T.slice(),fe=[0].concat(fe),we=T[0],T[1]>=t/2&&we++;do{if(w=0,s=r(T,O,ee,_),s<0){if(q=O[0],ee!=_&&(q=q*t+(O[1]||0)),w=W(q/we),w>1)for(w>=t&&(w=t-1),E=e(T,w,t),A=E.length,_=O.length;r(E,O,A,_)==1;)w--,n(E,ee<A?fe:T,A,t),A=E.length,s=1;else w==0&&(s=w=1),E=T.slice(),A=E.length;if(A<_&&(E=[0].concat(E)),n(O,E,_,t),_=O.length,s==-1)for(;r(T,O,ee,_)<1;)w++,n(O,ee<_?fe:T,_,t),_=O.length}else s===0&&(w++,O=[0]);D[f++]=w,O[0]?O[_++]=z[ce]||0:(O=[z[ce]],_=1)}while((ce++<ge||O[0]!=null)&&J--);a=O[0]!=null,D[0]||D.splice(0,1)}if(t==Q){for(f=1,J=D[0];J>=10;J/=10,f++);F(I,o+(I.e=f+u*N-1)+1,c,a)}else I.e=u,I.r=+a;return I}}();function se(e,r,n,l){var i,o,c,t,s;if(n==null?n=S:B(n,0,8),!e.c)return e.toString();if(i=e.c[0],c=e.e,r==null)s=Y(e.c),s=l==1||l==2&&(c<=R||c>=C)?ue(s,c):re(s,c,"0");else if(e=F(new h(e),r,n),o=e.e,s=Y(e.c),t=s.length,l==1||l==2&&(r<=o||o<=R)){for(;t<r;s+="0",t++);s=ue(s,o)}else if(r-=c,s=re(s,o,"0"),o+1>t){if(--r>0)for(s+=".";r--;s+="0");}else if(r+=o-t,r>0)for(o+1==t&&(s+=".");r--;s+="0");return e.s<0&&i?"-"+s:s}function oe(e,r){for(var n,l,i=1,o=new h(e[0]);i<e.length;i++)l=new h(e[i]),(!l.s||(n=te(o,l))===r||n===0&&o.s===r)&&(o=l);return o}function b(e,r,n){for(var l=1,i=r.length;!r[--i];r.pop());for(i=r[0];i>=10;i/=10,l++);return(n=l+n*N-1)>M?e.c=e.e=null:n<P?e.c=[e.e=0]:(e.e=n,e.c=r),e}m=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,n=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,c,t,s){var u,f=t?c:c.replace(i,"");if(l.test(f))o.s=isNaN(f)?null:f<0?-1:1;else{if(!t&&(f=f.replace(e,function(a,w,E){return u=(E=E.toLowerCase())=="x"?16:E=="b"?2:8,!s||s==u?w:a}),s&&(u=s,f=f.replace(r,"$1").replace(n,"0.$1")),c!=f))return new h(f,u);if(h.DEBUG)throw Error(H+"Not a"+(s?" base "+s:"")+" number: "+c);o.s=null}o.c=o.e=null}}();function F(e,r,n,l){var i,o,c,t,s,u,f,a=e.c,w=pe;if(a){e:{for(i=1,t=a[0];t>=10;t/=10,i++);if(o=r-i,o<0)o+=N,c=r,s=a[u=0],f=W(s/w[i-c-1]%10);else if(u=ae((o+1)/N),u>=a.length)if(l){for(;a.length<=u;a.push(0));s=f=0,i=1,o%=N,c=o-N+1}else break e;else{for(s=t=a[u],i=1;t>=10;t/=10,i++);o%=N,c=o-N+i,f=c<0?0:W(s/w[i-c-1]%10)}if(l=l||r<0||a[u+1]!=null||(c<0?s:s%w[i-c-1]),l=n<4?(f||l)&&(n==0||n==(e.s<0?3:2)):f>5||f==5&&(n==4||l||n==6&&(o>0?c>0?s/w[i-c]:0:a[u-1])%10&1||n==(e.s<0?8:7)),r<1||!a[0])return a.length=0,l?(r-=e.e+1,a[0]=w[(N-r%N)%N],e.e=-r||0):a[0]=e.e=0,e;if(o==0?(a.length=u,t=1,u--):(a.length=u+1,t=w[N-o],a[u]=c>0?W(s/w[i-c]%w[c])*t:0),l)for(;;)if(u==0){for(o=1,c=a[0];c>=10;c/=10,o++);for(c=a[0]+=t,t=1;c>=10;c/=10,t++);o!=t&&(e.e++,a[0]==Q&&(a[0]=1));break}else{if(a[u]+=t,a[u]!=Q)break;a[u--]=0,t=1}for(o=a.length;a[--o]===0;a.pop());}e.e>M?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function G(e){var r,n=e.e;return n===null?e.toString():(r=Y(e.c),r=n<=R||n>=C?ue(r,n):re(r,n,"0"),e.s<0?"-"+r:r)}return p.absoluteValue=p.abs=function(){var e=new h(this);return e.s<0&&(e.s=1),e},p.comparedTo=function(e,r){return te(this,new h(e,r))},p.decimalPlaces=p.dp=function(e,r){var n,l,i,o=this;if(e!=null)return B(e,0,L),r==null?r=S:B(r,0,8),F(new h(o),e+o.e+1,r);if(!(n=o.c))return null;if(l=((i=n.length-1)-Z(this.e/N))*N,i=n[i])for(;i%10==0;i/=10,l--);return l<0&&(l=0),l},p.dividedBy=p.div=function(e,r){return g(this,new h(e,r),v,S)},p.dividedToIntegerBy=p.idiv=function(e,r){return g(this,new h(e,r),0,1)},p.exponentiatedBy=p.pow=function(e,r){var n,l,i,o,c,t,s,u,f,a=this;if(e=new h(e),e.c&&!e.isInteger())throw Error(H+"Exponent not an integer: "+G(e));if(r!=null&&(r=new h(r)),t=e.e>14,!a.c||!a.c[0]||a.c[0]==1&&!a.e&&a.c.length==1||!e.c||!e.c[0])return f=new h(Math.pow(+G(a),t?e.s*(2-le(e)):+G(e))),r?f.mod(r):f;if(s=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new h(NaN);l=!s&&a.isInteger()&&r.isInteger(),l&&(a=a.mod(r))}else{if(e.e>9&&(a.e>0||a.e<-1||(a.e==0?a.c[0]>1||t&&a.c[1]>=24e7:a.c[0]<8e13||t&&a.c[0]<=9999975e7)))return o=a.s<0&&le(e)?-0:0,a.e>-1&&(o=1/o),new h(s?1/o:o);y&&(o=ae(y/N+2))}for(t?(n=new h(.5),s&&(e.s=1),u=le(e)):(i=Math.abs(+G(e)),u=i%2),f=new h(k);;){if(u){if(f=f.times(a),!f.c)break;o?f.c.length>o&&(f.c.length=o):l&&(f=f.mod(r))}if(i){if(i=W(i/2),i===0)break;u=i%2}else if(e=e.times(n),F(e,e.e+1,1),e.e>14)u=le(e);else{if(i=+G(e),i===0)break;u=i%2}a=a.times(a),o?a.c&&a.c.length>o&&(a.c.length=o):l&&(a=a.mod(r))}return l?f:(s&&(f=k.div(f)),r?f.mod(r):o?F(f,y,S,c):f)},p.integerValue=function(e){var r=new h(this);return e==null?e=S:B(e,0,8),F(r,r.e+1,e)},p.isEqualTo=p.eq=function(e,r){return te(this,new h(e,r))===0},p.isFinite=function(){return!!this.c},p.isGreaterThan=p.gt=function(e,r){return te(this,new h(e,r))>0},p.isGreaterThanOrEqualTo=p.gte=function(e,r){return(r=te(this,new h(e,r)))===1||r===0},p.isInteger=function(){return!!this.c&&Z(this.e/N)>this.c.length-2},p.isLessThan=p.lt=function(e,r){return te(this,new h(e,r))<0},p.isLessThanOrEqualTo=p.lte=function(e,r){return(r=te(this,new h(e,r)))===-1||r===0},p.isNaN=function(){return!this.s},p.isNegative=function(){return this.s<0},p.isPositive=function(){return this.s>0},p.isZero=function(){return!!this.c&&this.c[0]==0},p.minus=function(e,r){var n,l,i,o,c=this,t=c.s;if(e=new h(e,r),r=e.s,!t||!r)return new h(NaN);if(t!=r)return e.s=-r,c.plus(e);var s=c.e/N,u=e.e/N,f=c.c,a=e.c;if(!s||!u){if(!f||!a)return f?(e.s=-r,e):new h(a?c:NaN);if(!f[0]||!a[0])return a[0]?(e.s=-r,e):new h(f[0]?c:S==3?-0:0)}if(s=Z(s),u=Z(u),f=f.slice(),t=s-u){for((o=t<0)?(t=-t,i=f):(u=s,i=a),i.reverse(),r=t;r--;i.push(0));i.reverse()}else for(l=(o=(t=f.length)<(r=a.length))?t:r,t=r=0;r<l;r++)if(f[r]!=a[r]){o=f[r]<a[r];break}if(o&&(i=f,f=a,a=i,e.s=-e.s),r=(l=a.length)-(n=f.length),r>0)for(;r--;f[n++]=0);for(r=Q-1;l>t;){if(f[--l]<a[l]){for(n=l;n&&!f[--n];f[n]=r);--f[n],f[l]+=Q}f[l]-=a[l]}for(;f[0]==0;f.splice(0,1),--u);return f[0]?b(e,f,u):(e.s=S==3?-1:1,e.c=[e.e=0],e)},p.modulo=p.mod=function(e,r){var n,l,i=this;return e=new h(e,r),!i.c||!e.s||e.c&&!e.c[0]?new h(NaN):!e.c||i.c&&!i.c[0]?new h(i):(V==9?(l=e.s,e.s=1,n=g(i,e,0,3),e.s=l,n.s*=l):n=g(i,e,0,V),e=i.minus(n.times(e)),!e.c[0]&&V==1&&(e.s=i.s),e)},p.multipliedBy=p.times=function(e,r){var n,l,i,o,c,t,s,u,f,a,w,E,A,I,D,O=this,_=O.c,q=(e=new h(e,r)).c;if(!_||!q||!_[0]||!q[0])return!O.s||!e.s||_&&!_[0]&&!q||q&&!q[0]&&!_?e.c=e.e=e.s=null:(e.s*=O.s,!_||!q?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(l=Z(O.e/N)+Z(e.e/N),e.s*=O.s,s=_.length,a=q.length,s<a&&(A=_,_=q,q=A,i=s,s=a,a=i),i=s+a,A=[];i--;A.push(0));for(I=Q,D=ne,i=a;--i>=0;){for(n=0,w=q[i]%D,E=q[i]/D|0,c=s,o=i+c;o>i;)u=_[--c]%D,f=_[c]/D|0,t=E*u+f*w,u=w*u+t%D*D+A[o]+n,n=(u/I|0)+(t/D|0)+E*f,A[o--]=u%I;A[o]=n}return n?++l:A.splice(0,1),b(e,A,l)},p.negated=function(){var e=new h(this);return e.s=-e.s||null,e},p.plus=function(e,r){var n,l=this,i=l.s;if(e=new h(e,r),r=e.s,!i||!r)return new h(NaN);if(i!=r)return e.s=-r,l.minus(e);var o=l.e/N,c=e.e/N,t=l.c,s=e.c;if(!o||!c){if(!t||!s)return new h(i/0);if(!t[0]||!s[0])return s[0]?e:new h(t[0]?l:i*0)}if(o=Z(o),c=Z(c),t=t.slice(),i=o-c){for(i>0?(c=o,n=s):(i=-i,n=t),n.reverse();i--;n.push(0));n.reverse()}for(i=t.length,r=s.length,i-r<0&&(n=s,s=t,t=n,r=i),i=0;r;)i=(t[--r]=t[r]+s[r]+i)/Q|0,t[r]=Q===t[r]?0:t[r]%Q;return i&&(t=[i].concat(t),++c),b(e,t,c)},p.precision=p.sd=function(e,r){var n,l,i,o=this;if(e!=null&&e!==!!e)return B(e,1,L),r==null?r=S:B(r,0,8),F(new h(o),e,r);if(!(n=o.c))return null;if(i=n.length-1,l=i*N+1,i=n[i]){for(;i%10==0;i/=10,l--);for(i=n[0];i>=10;i/=10,l++);}return e&&o.e+1>l&&(l=o.e+1),l},p.shiftedBy=function(e){return B(e,-he,he),this.times("1e"+e)},p.squareRoot=p.sqrt=function(){var e,r,n,l,i,o=this,c=o.c,t=o.s,s=o.e,u=v+4,f=new h("0.5");if(t!==1||!c||!c[0])return new h(!t||t<0&&(!c||c[0])?NaN:c?o:1/0);if(t=Math.sqrt(+G(o)),t==0||t==1/0?(r=Y(c),(r.length+s)%2==0&&(r+="0"),t=Math.sqrt(+r),s=Z((s+1)/2)-(s<0||s%2),t==1/0?r="5e"+s:(r=t.toExponential(),r=r.slice(0,r.indexOf("e")+1)+s),n=new h(r)):n=new h(t+""),n.c[0]){for(s=n.e,t=s+u,t<3&&(t=0);;)if(i=n,n=f.times(i.plus(g(o,i,u,1))),Y(i.c).slice(0,t)===(r=Y(n.c)).slice(0,t))if(n.e<s&&--t,r=r.slice(t-3,t+1),r=="9999"||!l&&r=="4999"){if(!l&&(F(i,i.e+v+2,0),i.times(i).eq(o))){n=i;break}u+=4,t+=4,l=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(F(n,n.e+v+2,1),e=!n.times(n).eq(o));break}}return F(n,n.e+v+1,S,e)},p.toExponential=function(e,r){return e!=null&&(B(e,0,L),e++),se(this,e,r,1)},p.toFixed=function(e,r){return e!=null&&(B(e,0,L),e=e+this.e+1),se(this,e,r)},p.toFormat=function(e,r,n){var l,i=this;if(n==null)e!=null&&r&&typeof r=="object"?(n=r,r=null):e&&typeof e=="object"?(n=e,e=r=null):n=U;else if(typeof n!="object")throw Error(H+"Argument not an object: "+n);if(l=i.toFixed(e,r),i.c){var o,c=l.split("."),t=+n.groupSize,s=+n.secondaryGroupSize,u=n.groupSeparator||"",f=c[0],a=c[1],w=i.s<0,E=w?f.slice(1):f,A=E.length;if(s&&(o=t,t=s,s=o,A-=o),t>0&&A>0){for(o=A%t||t,f=E.substr(0,o);o<A;o+=t)f+=u+E.substr(o,t);s>0&&(f+=u+E.slice(o)),w&&(f="-"+f)}l=a?f+(n.decimalSeparator||"")+((s=+n.fractionGroupSize)?a.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):a):f}return(n.prefix||"")+l+(n.suffix||"")},p.toFraction=function(e){var r,n,l,i,o,c,t,s,u,f,a,w,E=this,A=E.c;if(e!=null&&(t=new h(e),!t.isInteger()&&(t.c||t.s!==1)||t.lt(k)))throw Error(H+"Argument "+(t.isInteger()?"out of range: ":"not an integer: ")+G(t));if(!A)return new h(E);for(r=new h(k),u=n=new h(k),l=s=new h(k),w=Y(A),o=r.e=w.length-E.e-1,r.c[0]=pe[(c=o%N)<0?N+c:c],e=!e||t.comparedTo(r)>0?o>0?r:u:t,c=M,M=1/0,t=new h(w),s.c[0]=0;f=g(t,r,0,1),i=n.plus(f.times(l)),i.comparedTo(e)!=1;)n=l,l=i,u=s.plus(f.times(i=u)),s=i,r=t.minus(f.times(i=r)),t=i;return i=g(e.minus(n),l,0,1),s=s.plus(i.times(u)),n=n.plus(i.times(l)),s.s=u.s=E.s,o=o*2,a=g(u,l,o,S).minus(E).abs().comparedTo(g(s,n,o,S).minus(E).abs())<1?[u,l]:[s,n],M=c,a},p.toNumber=function(){return+G(this)},p.toPrecision=function(e,r){return e!=null&&B(e,1,L),se(this,e,r,2)},p.toString=function(e){var r,n=this,l=n.s,i=n.e;return i===null?l?(r="Infinity",l<0&&(r="-"+r)):r="NaN":(e==null?r=i<=R||i>=C?ue(Y(n.c),i):re(Y(n.c),i,"0"):e===10&&X?(n=F(new h(n),v+i+1,S),r=re(Y(n.c),n.e,"0")):(B(e,2,$.length,"Base"),r=x(re(Y(n.c),i,"0"),10,e,l,!0)),l<0&&n.c[0]&&(r="-"+r)),r},p.valueOf=p.toJSON=function(){return G(this)},p._isBigNumber=!0,p[Symbol.toStringTag]="BigNumber",p[Symbol.for("nodejs.util.inspect.custom")]=p.valueOf,d!=null&&h.set(d),h}function Z(d){var g=d|0;return d>0||d===g?g:g-1}function Y(d){for(var g,x,m=1,p=d.length,k=d[0]+"";m<p;){for(g=d[m++]+"",x=N-g.length;x--;g="0"+g);k+=g}for(p=k.length;k.charCodeAt(--p)===48;);return k.slice(0,p+1||1)}function te(d,g){var x,m,p=d.c,k=g.c,v=d.s,S=g.s,R=d.e,C=g.e;if(!v||!S)return null;if(x=p&&!p[0],m=k&&!k[0],x||m)return x?m?0:-S:v;if(v!=S)return v;if(x=v<0,m=R==C,!p||!k)return m?0:!p^x?1:-1;if(!m)return R>C^x?1:-1;for(S=(R=p.length)<(C=k.length)?R:C,v=0;v<S;v++)if(p[v]!=k[v])return p[v]>k[v]^x?1:-1;return R==C?0:R>C^x?1:-1}function B(d,g,x,m){if(d<g||d>x||d!==W(d))throw Error(H+(m||"Argument")+(typeof d=="number"?d<g||d>x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function le(d){var g=d.c.length-1;return Z(d.e/N)==g&&d.c[g]%2!=0}function ue(d,g){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(g<0?"e":"e+")+g}function re(d,g,x){var m,p;if(g<0){for(p=x+".";++g;p+=x);d=p+d}else if(m=d.length,++g>m){for(p=x,g-=m;--g;p+=x);d+=p}else g<m&&(d=d.slice(0,g)+"."+d.slice(g));return d}var K=Ee();typeof SuppressedError=="function"&&SuppressedError;var Ne=function(d,g){return new K(d.dividedBy(new K(10).exponentiatedBy(g)).toFixed(g))},ie=function(d){return d.replace(/,/g,"")};self.addEventListener("message",d=>{const{data:g}=d,{task:x}=g;let m={};switch(x){case"processExposures":m=xe(g);break;case"processEraForExposure":m=Oe(g);break}postMessage({task:x,...m})});const Oe=d=>{const{era:g,exposures:x,exitOnExposed:m,task:p,networkName:k,who:v}=d;let S=!1;const R={};return x.every(({keys:C,val:P})=>{const M=C[1],j=(P==null?void 0:P.others)??[],V=(P==null?void 0:P.own)||0,y=(P==null?void 0:P.total)||0,U=M===v;if(U){const X=new K(V).isZero()?"0":new K(V).dividedBy(y).toString();if(R[M]={staked:V,total:y,share:X,isValidator:U},S=!0,m)return!1}const $=j.find(X=>X.who===v);if($){const X=new K($.value).isZero()?"0":new K($.value).dividedBy(y).toString();if(R[M]={staked:$.value,total:y,share:X,isValidator:U},S=!0,m)return!1}return!0}),{networkName:k,era:g,exposed:S,exposedValidators:Object.keys(R).length?R:null,task:p,who:v}},xe=d=>{const{task:g,networkName:x,era:m,units:p,exposures:k,activeAccount:v,maxNominatorRewardedPerValidator:S}=d,R=[];let C=0;const P=[],M=[];return k.forEach(({keys:j,val:V})=>{var $;C++;const y=j[1];let U=(V==null?void 0:V.others.map(X=>({...X,value:ie(X.value)})))??[];if(U.length){U=U.sort((b,F)=>{const G=new K(ie(F.value)).minus(ie(b.value));return G.isZero()?0:G.isLessThan(0)?-1:1});const X=Math.min(S-1,U.length),h=U.length>0?Ne(new K((($=U[X])==null?void 0:$.value)||0),p).toString():"0",se=U.length>S;R.push({address:y,lowestReward:h,oversubscribed:se,others:U,own:ie(V.own),total:ie(V.total)});for(const b of U){const F=new K(ie(b.value)),G=M.findIndex(({who:e})=>e===b.who);G===-1?M.push({who:b.who,value:F.toString()}):M[G].value=new K(M[G].value).plus(F).toString()}const oe=U.find(({who:b})=>b===v);oe!==void 0&&P.push({address:y,value:Ne(new K(ie(oe.value)),p).toString()})}}),{networkName:x,era:m,stakers:R,totalActiveNominators:M.length,activeAccountOwnStake:P,activeValidators:C,task:g,who:v}}})();
