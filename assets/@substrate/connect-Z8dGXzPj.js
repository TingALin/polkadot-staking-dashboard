const T="modulepreload",B=function(e){return"/polkadot-staking-dashboard/"+e},S={},p=function(n,t,d){let u=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link");u=Promise.all(t.map(r=>{if(r=B(r),r in S)return;S[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(!!d)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===r&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":T,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,h)=>{a.addEventListener("load",c),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}return u.then(()=>n()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};var L;(function(e){e.polkadot="polkadot",e.ksmcc3="ksmcc3",e.rococo_v2_2="rococo_v2_2",e.westend2="westend2"})(L||(L={}));let k;async function A(e){if(!Object.keys(L).includes(e))throw new Error("Invalid chain name");return k||(k={polkadot:p(()=>import("../polkadot-wKqdhIiS.js"),__vite__mapDeps([])),ksmcc3:p(()=>import("../ksmcc3-boIDT4Lz.js"),__vite__mapDeps([])),westend2:p(()=>import("../westend2-Dbc7TZgr.js"),__vite__mapDeps([])),rococo_v2_2:p(()=>import("../rococo_v2_2-UDMEkeEm.js"),__vite__mapDeps([]))}),(await k[e]).chainSpec}class P extends Error{constructor(){super(),this.name="AlreadyDestroyedError"}}class _ extends Error{constructor(n){super(n),this.name="CrashError"}}class C extends Error{constructor(){super(),this.name="JsonRpcDisabledError"}}const F=![typeof window,typeof document].includes("undefined");let M=class{},g=null;const N=()=>g||(g=p(()=>import("../index-browser-X9Kw7ot3.js"),__vite__mapDeps([0,1])).then(e=>(M=e.QueueFullError,e.start)),g);let b=null;const U=()=>b||(b=p(()=>import("../no-auto-bytecode-browser-xsf8BBG3.js"),__vite__mapDeps([])).then(e=>e.startWithBytecode),b),m=[];let l=null,y=3;const D=e=>{if(e.maxLogLevel&&e.maxLogLevel>y&&(y=e.maxLogLevel),l)return m.push(e),l instanceof Promise?l:Promise.resolve(l);let n,t;if(e.workerFactory){n=e.workerFactory();const{port1:o,port2:r}=new MessageChannel;n.postMessage(o,[o]),t=r}const d={portToWorker:t,forbidTcp:!0,forbidNonLocalWs:!0,maxLogLevel:9999999,cpuRateLimit:.5,logCallback:(o,r,i)=>{o>y||(o<=1?console.error("[%s] %s",r,i):o===2?console.warn("[%s] %s",r,i):o===3?console.info("[%s] %s",r,i):o===4?console.debug("[%s] %s",r,i):console.trace("[%s] %s",r,i))}},u=n?U().then(o=>o({...d,bytecode:new Promise(r=>{F?n.onmessage=i=>r(i.data):n.on("message",i=>r(i))})})):N().then(o=>o(d));return l=u,u.then(o=>(l===u?l=o:o.terminate(),o)),m.push(e),l},R=e=>{const n=m.indexOf(e);if(n===-1)throw new Error("Internal error within smoldot");m.splice(n,1),y=3;for(const t of m.values())t.maxLogLevel&&t.maxLogLevel>y&&(y=t.maxLogLevel);m.length===0&&(l&&!(l instanceof Promise)&&l.terminate(),l=null)},O=e=>{try{e()}catch(n){const t=n;throw(t==null?void 0:t.name)==="JsonRpcDisabledError"?new C:(t==null?void 0:t.name)==="CrashError"?new _(t.message):(t==null?void 0:t.name)==="AlreadyDestroyedError"?new P:new _(n instanceof Error?n.message:`Unexpected error ${n}`)}},V=e=>{const n=e||{maxLogLevel:3},t=new Map,d=async(o,r,i,s)=>{var w;const a=await D(n);try{const c=await a.addChain({chainSpec:o,potentialRelayChains:(w=i==null?void 0:i.map(f=>t.get(f)).filter(f=>!!f))!==null&&w!==void 0?w:[...t.values()],disableJsonRpc:r===void 0,databaseContent:s});(async()=>{for(;;){let f;try{f=await c.nextJsonRpcResponse()}catch{break}try{r(f)}catch(v){console.error("JSON-RPC callback has thrown an exception:",v)}}})();const h={sendJsonRpc:f=>{O(()=>{try{c.sendJsonRpc(f)}catch(v){if(v instanceof M)try{const I=JSON.parse(f);r(JSON.stringify({jsonrpc:"v2",id:I.id,error:{code:-32e3,message:"JSON-RPC server is too busy"}}))}catch{}else throw v}})},remove:()=>{try{O(()=>{c.remove()})}finally{t.delete(h),R(n)}}};return t.set(h,c),h}catch(c){throw R(n),c}};return{addChain:d,addWellKnownChain:async(o,r,i)=>{D(n);try{return await d(await A(o),r,void 0,i)}finally{R(n)}}}},x=new Map;typeof window=="object"&&window.addEventListener("message",({data:e})=>{var n;(e==null?void 0:e.origin)==="substrate-connect-extension"&&((n=x.get(e.chainId))===null||n===void 0||n(e))});function W(){const e=new BigUint64Array(2);return crypto.getRandomValues(e),(e[1]<<BigInt(64)|e[0]).toString(36)}const $=()=>{const e=new Map,n=async(t,d,u,o=[])=>{let r;const i=new Promise(a=>{r=()=>a(null)}),s={id:W(),state:{state:"pending",waitFinished:r}};if(x.has(s.id))throw new Error("Unexpectedly randomly generated the same chain ID twice despite 64bits of entropy");if(x.set(s.id,a=>{switch(s.state.state){case"pending":{const c=s.state.waitFinished;switch(a.type){case"chain-ready":{s.state={state:"ok"};break}case"error":{s.state={state:"dead",error:new _("Error while creating the chain: "+a.errorMessage)};break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}c();break}case"ok":{switch(a.type){case"error":{s.state={state:"dead",error:new _("Extension has killed the chain: "+a.errorMessage)};break}case"rpc":{u?u(a.jsonRpcMessage):console.warn("Unexpected message of type `msg.type` received from substrate-connect extension");break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}break}}}),E(t?{origin:"substrate-connect-client",chainId:s.id,type:"add-well-known-chain",chainName:d}:{origin:"substrate-connect-client",chainId:s.id,type:"add-chain",chainSpec:d,potentialRelayChainIds:o}),await i,t&&s.state.state==="dead"){let a;const c=new Promise(h=>{a=()=>h(null)});s.state={state:"pending",waitFinished:a},E({origin:"substrate-connect-client",chainId:s.id,type:"add-chain",chainSpec:await A(d),potentialRelayChainIds:[]}),await c}if(s.state.state==="dead")throw s.state.error;const w={sendJsonRpc:a=>{if(s.state.state==="dead")throw s.state.error;if(!u)throw new C;E({origin:"substrate-connect-client",chainId:s.id,type:"rpc",jsonRpcMessage:a})},remove:()=>{if(s.state.state==="dead")throw s.state.error;s.state={state:"dead",error:new P},x.delete(s.id),e.delete(w),E({origin:"substrate-connect-client",chainId:s.id,type:"remove-chain"})}};return e.set(w,s.id),w};return{addChain:(t,d)=>n(!1,t,d,[...e.values()]),addWellKnownChain:(t,d)=>n(!0,t,d)}};function E(e){window.postMessage(e,"*")}const j="substrateConnectExtensionAvailable",J=typeof document=="object"&&typeof document.getElementById=="function"&&!!document.getElementById(j);function q(e){return!(e==null?void 0:e.forceEmbeddedNode)&&J?$():V(e==null?void 0:e.embeddedNodeConfig)}const Q=Object.freeze(Object.defineProperty({__proto__:null,AlreadyDestroyedError:P,CrashError:_,JsonRpcDisabledError:C,get WellKnownChain(){return L},createScClient:q,isExtensionPresent:J},Symbol.toStringTag,{value:"Module"}));export{L as W,p as _,Q as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-browser-X9Kw7ot3.js","assets/no-auto-bytecode-browser-xsf8BBG3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
