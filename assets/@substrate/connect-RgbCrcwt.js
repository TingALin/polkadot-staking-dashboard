function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-browser-D0pzSknA.js","assets/no-auto-bytecode-browser-DLcDUSN0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
const B="modulepreload",F=function(e){return"/polkadot-staking-dashboard/"+e},S={},p=function(n,r,c){let f=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));f=Promise.all(r.map(t=>{if(t=F(t),t in S)return;S[t]=!0;const u=t.endsWith(".css"),a=u?'[rel="stylesheet"]':"";if(!!c)for(let d=s.length-1;d>=0;d--){const m=s[d];if(m.href===t&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${a}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":B,u||(l.as="script",l.crossOrigin=""),l.href=t,i&&l.setAttribute("nonce",i),document.head.appendChild(l),u)return new Promise((d,m)=>{l.addEventListener("load",d),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${t}`)))})}))}return f.then(()=>n()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var L;(function(e){e.polkadot="polkadot",e.ksmcc3="ksmcc3",e.rococo_v2_2="rococo_v2_2",e.westend2="westend2"})(L||(L={}));let k;async function A(e){if(!Object.keys(L).includes(e))throw new Error("Invalid chain name");return k||(k={polkadot:p(()=>import("../polkadot-C3wQAc0q.js"),[]),ksmcc3:p(()=>import("../ksmcc3-Av7fv1td.js"),[]),westend2:p(()=>import("../westend2-CRrt64Bl.js"),[]),rococo_v2_2:p(()=>import("../rococo_v2_2-2r51TVxh.js"),[])}),(await k[e]).chainSpec}class P extends Error{constructor(){super(),this.name="AlreadyDestroyedError"}}class _ extends Error{constructor(n){super(n),this.name="CrashError"}}class C extends Error{constructor(){super(),this.name="JsonRpcDisabledError"}}const M=![typeof window,typeof document].includes("undefined");let J=class{},g=null;const U=()=>g||(g=p(()=>import("../index-browser-D0pzSknA.js"),__vite__mapDeps([0,1])).then(e=>(J=e.QueueFullError,e.start)),g);let b=null;const V=()=>b||(b=p(()=>import("../no-auto-bytecode-browser-DLcDUSN0.js"),[]).then(e=>e.startWithBytecode),b),y=[];let h=null,v=3;const D=e=>{if(e.maxLogLevel&&e.maxLogLevel>v&&(v=e.maxLogLevel),h)return y.push(e),h instanceof Promise?h:Promise.resolve(h);let n,r;if(e.workerFactory){n=e.workerFactory();const{port1:s,port2:o}=new MessageChannel;n.postMessage(s,[s]),r=o}const c={portToWorker:r,forbidTcp:!0,forbidNonLocalWs:!0,maxLogLevel:9999999,cpuRateLimit:.5,logCallback:(s,o,i)=>{s>v||(s<=1?console.error("[%s] %s",o,i):s===2?console.warn("[%s] %s",o,i):s===3?console.info("[%s] %s",o,i):s===4?console.debug("[%s] %s",o,i):console.trace("[%s] %s",o,i))}},f=n?V().then(s=>s({...c,bytecode:new Promise(o=>{M?n.onmessage=i=>o(i.data):n.on("message",i=>o(i))})})):U().then(s=>s(c));return h=f,f.then(s=>(h===f?h=s:s.terminate(),s)),y.push(e),h},R=e=>{const n=y.indexOf(e);if(n===-1)throw new Error("Internal error within smoldot");y.splice(n,1),v=3;for(const r of y.values())r.maxLogLevel&&r.maxLogLevel>v&&(v=r.maxLogLevel);y.length===0&&(h&&!(h instanceof Promise)&&h.terminate(),h=null)},O=e=>{try{e()}catch(n){const r=n;throw(r==null?void 0:r.name)==="JsonRpcDisabledError"?new C:(r==null?void 0:r.name)==="CrashError"?new _(r.message):(r==null?void 0:r.name)==="AlreadyDestroyedError"?new P:new _(n instanceof Error?n.message:`Unexpected error ${n}`)}},N=e=>{const n=e||{maxLogLevel:3},r=new Map,c=async(s,o,i,t)=>{var u;const a=await D(n);try{const w=await a.addChain({chainSpec:s,potentialRelayChains:(u=i==null?void 0:i.map(d=>r.get(d)).filter(d=>!!d))!==null&&u!==void 0?u:[...r.values()],disableJsonRpc:o===void 0,databaseContent:t});(async()=>{for(;;){let d;try{d=await w.nextJsonRpcResponse()}catch{break}try{o(d)}catch(m){console.error("JSON-RPC callback has thrown an exception:",m)}}})();const l={sendJsonRpc:d=>{O(()=>{try{w.sendJsonRpc(d)}catch(m){if(m instanceof J)try{const I=JSON.parse(d);o(JSON.stringify({jsonrpc:"v2",id:I.id,error:{code:-32e3,message:"JSON-RPC server is too busy"}}))}catch{}else throw m}})},remove:()=>{try{O(()=>{w.remove()})}finally{r.delete(l),R(n)}}};return r.set(l,w),l}catch(w){throw R(n),w}};return{addChain:c,addWellKnownChain:async(s,o,i)=>{D(n);try{return await c(await A(s),o,void 0,i)}finally{R(n)}}}},x=new Map;typeof window=="object"&&window.addEventListener("message",({data:e})=>{var n;(e==null?void 0:e.origin)==="substrate-connect-extension"&&((n=x.get(e.chainId))===null||n===void 0||n(e))});function W(){const e=new BigUint64Array(2);return crypto.getRandomValues(e),(e[1]<<BigInt(64)|e[0]).toString(36)}const $=()=>{const e=new Map,n=async(r,c,f,s=[])=>{let o;const i=new Promise(a=>{o=()=>a(null)}),t={id:W(),state:{state:"pending",waitFinished:o}};if(x.has(t.id))throw new Error("Unexpectedly randomly generated the same chain ID twice despite 64bits of entropy");if(x.set(t.id,a=>{switch(t.state.state){case"pending":{const w=t.state.waitFinished;switch(a.type){case"chain-ready":{t.state={state:"ok"};break}case"error":{t.state={state:"dead",error:new _("Error while creating the chain: "+a.errorMessage)};break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}w();break}case"ok":{switch(a.type){case"error":{t.state={state:"dead",error:new _("Extension has killed the chain: "+a.errorMessage)};break}case"rpc":{f?f(a.jsonRpcMessage):console.warn("Unexpected message of type `msg.type` received from substrate-connect extension");break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}break}}}),E(r?{origin:"substrate-connect-client",chainId:t.id,type:"add-well-known-chain",chainName:c}:{origin:"substrate-connect-client",chainId:t.id,type:"add-chain",chainSpec:c,potentialRelayChainIds:s}),await i,r&&t.state.state==="dead"){let a;const w=new Promise(l=>{a=()=>l(null)});t.state={state:"pending",waitFinished:a},E({origin:"substrate-connect-client",chainId:t.id,type:"add-chain",chainSpec:await A(c),potentialRelayChainIds:[]}),await w}if(t.state.state==="dead")throw t.state.error;const u={sendJsonRpc:a=>{if(t.state.state==="dead")throw t.state.error;if(!f)throw new C;E({origin:"substrate-connect-client",chainId:t.id,type:"rpc",jsonRpcMessage:a})},remove:()=>{if(t.state.state==="dead")throw t.state.error;t.state={state:"dead",error:new P},x.delete(t.id),e.delete(u),E({origin:"substrate-connect-client",chainId:t.id,type:"remove-chain"})}};return e.set(u,t.id),u};return{addChain:(r,c)=>n(!1,r,c,[...e.values()]),addWellKnownChain:(r,c)=>n(!0,r,c)}};function E(e){window.postMessage(e,"*")}const j="substrateConnectExtensionAvailable",T=typeof document=="object"&&typeof document.getElementById=="function"&&!!document.getElementById(j);function q(e){return!(e==null?void 0:e.forceEmbeddedNode)&&T?$():N(e==null?void 0:e.embeddedNodeConfig)}const Q=Object.freeze(Object.defineProperty({__proto__:null,AlreadyDestroyedError:P,CrashError:_,JsonRpcDisabledError:C,get WellKnownChain(){return L},createScClient:q,isExtensionPresent:T},Symbol.toStringTag,{value:"Module"}));export{L as W,p as _,Q as i};
